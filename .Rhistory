dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22.xlsx"
df <- read_excel(dir, sheet = 1)
library(readxl)
library(dplyr)
#library(rio)
library(ggplot2)
library(tidyr)
options(scipen=5, digits = 5)
dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22.xlsx"
df <- read_excel(dir, sheet = 1)
df <- df %>% mutate(DOB = as.Date(DOB))
# Reading libraries:
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
options(scipen=5, digits = 5)
# Reading the file:
dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22.xlsx"
#dir <-
df <- read_excel(dir, sheet = 1)
df <- df %>% mutate(DOB = as.Date(DOB))
## df arrangement:
# Filtering participants that completed the survey:
# not relevant columns :
not_relevant <- c('allergist_followup', 'last_spt', 'epipen', 'mistake_exposure', 'reaction_type24', 'diagnosis_by')
df <- df[-which(colnames(df) %in% not_relevant)]
# Filter only participants that complete the survey
df <- df %>% filter(month_survey_complete == 2)
# add binary columns
df$family_Atopic_diseases_sum <- rowSums(df[,15:50])
df$mother_Atopic_diseases_sum <- rowSums(df[,15:20])
df$father_Atopic_diseases_sum <- rowSums(df[,21:26])
df$sibling_Atopic_diseases_sum <- rowSums(df[,27:50])
df <- df %>% mutate(family_Atopic_diseases = ifelse(family_Atopic_diseases_sum >0,1,0),
mother_Atopic_diseases = ifelse(mother_Atopic_diseases_sum>0,1,0),
father_Atopic_diseases = ifelse(father_Atopic_diseases_sum > 0, 1,0),
sibling_Atopic_diseases = ifelse(sibling_Atopic_diseases_sum > 0 ,1, 0)) #%>% select(-c(family_Atopic_diseases_sum, mother_Atopic_diseases_sum, father_Atopic_diseases_sum, sibling_Atopic_diseases_sum))
remove_columns = colnames(df)[51:86]
df <- df[,-c(51:86)]
# Reading the file:
dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22.xlsx"
#dir <-
df <- read_excel(dir, sheet = 1)
df <- df %>% mutate(DOB = as.Date(DOB))
View(df)
# Reading libraries:
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
options(scipen=5, digits = 5)
# Reading the file:
dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22.xlsx"
# libraries:
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
options(scipen=5, digits = 5)
# libraries:
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
options(scipen=5, digits = 5)
# libraries:
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
options(scipen=5, digits = 5)
# Reading the file:
#dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir<-
df <- read_excel(dir, sheet = 1)
df <- df %>% mutate(DOB = as.Date(DOB))
# Arranging df:
# Filtering only participants that completed the survey:
df <- df %>% filter(is.na(lost_of_followup))
# Filtering only participants that completed the second year:
df <- df %>% filter(month_survey_complete == 2)
# Removing non relevant columns: from type_of_allergy to 12_month_FA_type_allergy
#remove_columns = colnames(df)[51:88]
df <- df[,-c(51:88)]
# Removing columns with allot on NA:
not_relevant <- c('allergist_followup', 'last_spt', 'epipen', 'mistake_exposure', 'reaction_type24', 'diagnosis_by', 'lost_of_followup')
df <- df[-which(colnames(df) %in% not_relevant)]
# Adding binary columns
# A. Did any one from family (mother, father, sib) have *any* of the disease?
df$family_Atopic_diseases_sum <- rowSums(df[,14:49])
# B. Did somebody from family have a specific disease?
# NEED TO FILL IN
# C. Did a disease appear in a specific family member?
df$mother_Atopic_diseases_sum <- rowSums(df[,14:19])
df$father_Atopic_diseases_sum <- rowSums(df[,20:25])
df$sibling_Atopic_diseases_sum <- rowSums(df[,26:49])
df <- df %>% mutate(family_Atopic_diseases = ifelse(family_Atopic_diseases_sum >0,1,0),
mother_Atopic_diseases = ifelse(mother_Atopic_diseases_sum>0,1,0),
father_Atopic_diseases = ifelse(father_Atopic_diseases_sum > 0, 1,0),
sibling_Atopic_diseases = ifelse(sibling_Atopic_diseases_sum > 0 ,1, 0))
# Changing to binary variables:
df$gender[df$gender == 2] <- 0
df$`Jew/Arab`[df$`Jew/Arab` == 2] <- 0
df$food_allergy_24_month[df$food_allergy_24_month == 2] <- 0
df$inhalation_24_month[df$inhalation_24_month == 2] <- 0
df$prevention_therapy[df$prevention_therapy == 2] <- 0
df$AD_24_month[df$AD_24_month == 2] <- 0
df$steroids_treatment24[df$steroids_treatment24 == 2] <- 0
df$ABX_treatment_24_months[df$ABX_treatment_24_months == 2] <- 0
df$hospitalization_24_months[df$hospitalization_24_months == 2] <- 0
df$chronic_disease_24[df$chronic_disease_24 == 2] <- 0
# Taking a first view at data:
summary(df)
glimpse(df)
# attach(df)
# One strange observation- gave birth at 12??
df[which(df$mother_year_birth> 2000),] # to take off ??
attach(df) ##מה זה?
attach(df) ##מה זה? -- יוצר משתנה עבור כל עמודה בפנה עצמה סלי קשר לדאטה
# Show the distribution of some variables
hist(mother_year_birth)
hist(SES) #socio-economic status
tablelist
# Frequency table for each column
tablelist <- mapply(table, df)
tablelist
# How many NA are in each column
NA_count <- as.data.frame(t(df %>% summarise_all(funs(sum(is.na(.)))))) %>% dplyr::rename("amount of NA" = 1)
NA_count <- NA_count %>% mutate(Name = rownames(NA_count))
NA_column = NA_count %>% filter(`amount of NA` >0) %>% arrange(`amount of NA`)
# How many NA are in each column
NA_count <- as.data.frame(t(df %>% summarise_all(funs(sum(is.na(.)))))) %>% dplyr::rename("amount of NA" = 1)
NA_count <- NA_count %>% mutate(Name = rownames(NA_count))
NA_column = NA_count %>% filter(`amount of NA` >0) %>% arrange(`amount of NA`)
View(NA_column)
df$month_F
View(df)
df$AD_first_year
# Reading the file:
#dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir<-
df <- read_excel(dir, sheet = 1)
df <- df %>% mutate(DOB = as.Date(DOB))
# Arranging df:
# Filtering only participants that completed the survey:
df <- df %>% filter(is.na(lost_of_followup))
# Filtering only participants that completed the second year:
df <- df %>% filter(month_survey_complete == 2)
# Removing non relevant columns: from type_of_allergy to 12_month_FA_type_allergy
#remove_columns = colnames(df)[51:88]
df <- df[,-c(51:88)]
# Removing columns with allot on NA:
not_relevant <- c('allergist_followup', 'last_spt', 'epipen', 'mistake_exposure', 'reaction_type24', 'diagnosis_by', 'lost_of_followup')
df <- df[-which(colnames(df) %in% not_relevant)]
# Adding binary columns
# A. Did any one from family (mother, father, sib) have *any* of the disease?
df$family_Atopic_diseases_sum <- rowSums(df[,14:49])
# B. Did somebody from family have a specific disease?
# NEED TO FILL IN
# C. Did a disease appear in a specific family member?
df$mother_Atopic_diseases_sum <- rowSums(df[,14:19])
df$father_Atopic_diseases_sum <- rowSums(df[,20:25])
df$sibling_Atopic_diseases_sum <- rowSums(df[,26:49])
df <- df %>% mutate(family_Atopic_diseases = ifelse(family_Atopic_diseases_sum >0,1,0),
mother_Atopic_diseases = ifelse(mother_Atopic_diseases_sum>0,1,0),
father_Atopic_diseases = ifelse(father_Atopic_diseases_sum > 0, 1,0),
sibling_Atopic_diseases = ifelse(sibling_Atopic_diseases_sum > 0 ,1, 0))
# Changing to binary variables:
df$gender[df$gender == 2] <- 0
df$`Jew/Arab`[df$`Jew/Arab` == 2] <- 0
df$food_allergy_24_month[df$food_allergy_24_month == 2] <- 0
df$inhalation_24_month[df$inhalation_24_month == 2] <- 0
df$prevention_therapy[df$prevention_therapy == 2] <- 0
df$AD_24_month[df$AD_24_month == 2] <- 0
df$steroids_treatment24[df$steroids_treatment24 == 2] <- 0
df$ABX_treatment_24_months[df$ABX_treatment_24_months == 2] <- 0
df$hospitalization_24_months[df$hospitalization_24_months == 2] <- 0
df$chronic_disease_24[df$chronic_disease_24 == 2] <- 0
df$AD_first_year
df <- df %>% mutate(is_atopic_first_year = ifelse((AD_first_year + FA_first_year + ABX_fisrt_year)>0,1,0))
as.Date("2020-01-30")
View(df)
covid_start_date <- as.Date("2020-01-30")
covid_mid_date <- as.Date("2020-07-30")
df <- df %>% mutate(covid_time = ifelse(DOB < covid_start_date,1,ifelse(DOB < covid_mid_date, 2,3)))
df[,c("DOB","covid_time")]
table(df$covid_time)
df[which(DOB == MAX(dob)),]
df[which(DOB == max(DOB)),]
table(df$covid_time)
source('~/.active-rstudio-document', encoding = 'UTF-8', echo=TRUE)
923 +344 +115
table(df$covid_time,df$`mode of delivery`)
819 + 43 + 61
table(df$covid_time,df$`mode of delivery`,df$mother_asthma)
table(df$covid_time,df$`mode of delivery`)
#df$month_F
colnames(df)
#df$month_F
colnames(df)[49:93]
#df$month_F
colnames(df)[49:83]
print("SES")
table(df$covid_time,df$SES)
print("gender")
table(df$covid_time,df$gender)
print("mother_education")
table(df$covid_time,df$mother_education)
print("preganancy_number")
table(df$covid_time,df$preganancy_number)
print("type_of_pregnancy")
table(df$covid_time,df$type_of_pregnancy)
print("mode of delivery")
table(df$covid_time,df$`mode of delivery`)
print("mother_Atopic_diseases")
table(df$covid_time,df$mother_Atopic_diseases)
print("father_Atopic_diseases")
table(df$covid_time,df$father_Atopic_diseases)
print("sibling_Atopic_diseases")
table(df$covid_time,df$sibling_Atopic_diseases)
print("vaccine_12mo")
table(df$covid_time,df$vaccine_12mo)
print("nursing_setup_at_12mo")
table(df$covid_time,df$nursing_setup_at_12mo)
print("daycare_24month")
table(df$covid_time,df$daycare_24month)
print("vaccines_24month")
table(df$covid_time,df$vaccines_24month)
print("HRAD_first_year")
table(df$covid_time,df$HRAD_first_year)
print("AD_first_year")
table(df$covid_time,df$AD_first_year)
print("FA_first_year")
table(df$covid_time,df$FA_first_year)
print("ABX_fisrt_year")
table(df$covid_time,df$ABX_fisrt_year)
print("is_atopic_first_year")
table(df$covid_time,df$is_atopic_first_year)
print("food_allergy_24_month")
table(df$covid_time,df$food_allergy_24_month)
print("inhalation_24_month")
table(df$covid_time,df$inhalation_24_month)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("hospitalization_24_months")
table(df$covid_time,df$hospitalization_24_months)
print("chronic_disease_24")
table(df$covid_time,df$chronic_disease_24)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print('is_atopic_second_year)
table(df$covid_time,df$is_atopic_second_year)
print("SES")
table(df$covid_time,df$SES)
print("gender")
table(df$covid_time,df$gender)
print("mother_education")
table(df$covid_time,df$mother_education)
print("preganancy_number")
table(df$covid_time,df$preganancy_number)
print("type_of_pregnancy")
table(df$covid_time,df$type_of_pregnancy)
print("mode of delivery")
table(df$covid_time,df$`mode of delivery`)
print("mother_Atopic_diseases")
table(df$covid_time,df$mother_Atopic_diseases)
print("father_Atopic_diseases")
table(df$covid_time,df$father_Atopic_diseases)
print("sibling_Atopic_diseases")
table(df$covid_time,df$sibling_Atopic_diseases)
print("vaccine_12mo")
table(df$covid_time,df$vaccine_12mo)
print("nursing_setup_at_12mo")
table(df$covid_time,df$nursing_setup_at_12mo)
print("daycare_24month")
table(df$covid_time,df$daycare_24month)
print("vaccines_24month")
table(df$covid_time,df$vaccines_24month)
print("HRAD_first_year")
table(df$covid_time,df$HRAD_first_year)
print("AD_first_year")
table(df$covid_time,df$AD_first_year)
print("FA_first_year")
table(df$covid_time,df$FA_first_year)
print("ABX_fisrt_year")
table(df$covid_time,df$ABX_fisrt_year)
print("is_atopic_first_year")
table(df$covid_time,df$is_atopic_first_year)
print("food_allergy_24_month")
table(df$covid_time,df$food_allergy_24_month)
print("inhalation_24_month")
table(df$covid_time,df$inhalation_24_month)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("hospitalization_24_months")
table(df$covid_time,df$hospitalization_24_months)
print("chronic_disease_24")
table(df$covid_time,df$chronic_disease_24)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("is_atopic_second_year")
table(df$covid_time,df$is_atopic_second_year)
