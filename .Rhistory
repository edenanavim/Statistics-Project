print("is_atopic_first_year")
table(df$covid_time,df$is_atopic_first_year)
print("food_allergy_24_month")
table(df$covid_time,df$food_allergy_24_month)
print("inhalation_24_month")
table(df$covid_time,df$inhalation_24_month)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("hospitalization_24_months")
table(df$covid_time,df$hospitalization_24_months)
print("chronic_disease_24")
table(df$covid_time,df$chronic_disease_24)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("is_atopic_second_year")
table(df$covid_time,df$is_atopic_second_year)
# two dimention tables:
#covid time:
print("SES")
table(df$covid_time,df$SES)
print("gender")
table(df$covid_time,df$gender)
print("mother_education")
table(df$covid_time,df$mother_education)
print("preganancy_number")
table(df$covid_time,df$preganancy_number)
print("type_of_pregnancy")
table(df$covid_time,df$type_of_pregnancy)
print("mode of delivery")
table(df$covid_time,df$`mode of delivery`)
print("mother_Atopic_diseases")
table(df$covid_time,df$mother_Atopic_diseases)
print("father_Atopic_diseases")
table(df$covid_time,df$father_Atopic_diseases)
print("sibling_Atopic_diseases")
table(df$covid_time,df$sibling_Atopic_diseases)
print("vaccine_12mo")
table(df$covid_time,df$vaccine_12mo)
print("nursing_setup_at_12mo")
table(df$covid_time,df$nursing_setup_at_12mo)
print("daycare_24month")
table(df$covid_time,df$daycare_24month)
print("vaccines_24month")
table(df$covid_time,df$vaccines_24month)
print("HRAD_first_year")
table(df$covid_time,df$HRAD_first_year)
print("AD_first_year")
table(df$covid_time,df$AD_first_year)
print("FA_first_year")
table(df$covid_time,df$FA_first_year)
print("ABX_fisrt_year")
table(df$covid_time,df$ABX_fisrt_year)
print("is_atopic_first_year")
table(df$covid_time,df$is_atopic_first_year)
print("food_allergy_24_month")
table(df$covid_time,df$food_allergy_24_month)
print("inhalation_24_month")
table(df$covid_time,df$inhalation_24_month)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("hospitalization_24_months")
table(df$covid_time,df$hospitalization_24_months)
print("chronic_disease_24")
table(df$covid_time,df$chronic_disease_24)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("is_atopic_second_year")
table(df$covid_time,df$is_atopic_second_year)
ggplot(gather(intresting_col[,1:12]) %>% na.omit() , aes(value)) +
geom_histogram(bins = 10) +
facet_wrap(~key, scales = 'free_x')
# two dimention tables:
#covid time:
print("SES")
table(df$covid_time,df$SES)
print("gender")
table(df$covid_time,df$gender)
print("mother_education")
table(df$covid_time,df$mother_education)
print("preganancy_number")
table(df$covid_time,df$preganancy_number)
print("type_of_pregnancy")
table(df$covid_time,df$type_of_pregnancy)
print("mode of delivery")
table(df$covid_time,df$`mode of delivery`)
print("mother_Atopic_diseases")
table(df$covid_time,df$mother_Atopic_diseases)
print("father_Atopic_diseases")
table(df$covid_time,df$father_Atopic_diseases)
print("sibling_Atopic_diseases")
table(df$covid_time,df$sibling_Atopic_diseases)
print("vaccine_12mo")
table(df$covid_time,df$vaccine_12mo)
print("nursing_setup_at_12mo")
table(df$covid_time,df$nursing_setup_at_12mo)
print("daycare_24month")
table(df$covid_time,df$daycare_24month)
print("vaccines_24month")
table(df$covid_time,df$vaccines_24month)
print("HRAD_first_year")
table(df$covid_time,df$HRAD_first_year)
print("AD_first_year")
table(df$covid_time,df$AD_first_year)
print("FA_first_year")
table(df$covid_time,df$FA_first_year)
print("ABX_fisrt_year")
table(df$covid_time,df$ABX_fisrt_year)
print("is_atopic_first_year")
table(df$covid_time,df$is_atopic_first_year)
print("food_allergy_24_month")
table(df$covid_time,df$food_allergy_24_month)
print("inhalation_24_month")
table(df$covid_time,df$inhalation_24_month)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("hospitalization_24_months")
table(df$covid_time,df$hospitalization_24_months)
print("chronic_disease_24")
table(df$covid_time,df$chronic_disease_24)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("is_atopic_second_year")
table(df$covid_time,df$is_atopic_second_year)
print("food_allergy_24_month")
table(df$covid_time,df$food_allergy_24_month)
print("inhalation_24_month")
table(df$covid_time,df$inhalation_24_month)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("hospitalization_24_months")
table(df$covid_time,df$hospitalization_24_months)
print("chronic_disease_24")
table(df$covid_time,df$chronic_disease_24)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("is_atopic_second_year")
table(df$covid_time,df$is_atopic_second_year)
# two dimention tables:
#covid time:
print("SES")
table(df$covid_time,df$SES)
print("gender")
table(df$covid_time,df$gender)
print("mother_education")
table(df$covid_time,df$mother_education)
print("preganancy_number")
table(df$covid_time,df$preganancy_number)
print("type_of_pregnancy")
table(df$covid_time,df$type_of_pregnancy)
print("mode of delivery")
table(df$covid_time,df$`mode of delivery`)
print("mother_Atopic_diseases")
table(df$covid_time,df$mother_Atopic_diseases)
print("father_Atopic_diseases")
table(df$covid_time,df$father_Atopic_diseases)
print("sibling_Atopic_diseases")
table(df$covid_time,df$sibling_Atopic_diseases)
print("vaccine_12mo")
table(df$covid_time,df$vaccine_12mo)
print("nursing_setup_at_12mo")
table(df$covid_time,df$nursing_setup_at_12mo)
print("daycare_24month")
table(df$covid_time,df$daycare_24month)
print("vaccines_24month")
table(df$covid_time,df$vaccines_24month)
print("HRAD_first_year")
table(df$covid_time,df$HRAD_first_year)
print("AD_first_year")
table(df$covid_time,df$AD_first_year)
print("FA_first_year")
table(df$covid_time,df$FA_first_year)
print("ABX_fisrt_year")
table(df$covid_time,df$ABX_fisrt_year)
print("is_atopic_first_year")
table(df$covid_time,df$is_atopic_first_year)
print("food_allergy_24_month")
table(df$covid_time,df$food_allergy_24_month)
print("inhalation_24_month")
table(df$covid_time,df$inhalation_24_month)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("hospitalization_24_months")
table(df$covid_time,df$hospitalization_24_months)
print("chronic_disease_24")
table(df$covid_time,df$chronic_disease_24)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("is_atopic_second_year")
table(df$covid_time,df$is_atopic_second_year)
colnames(df)
# libraries:
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
options(scipen=5, digits = 5)
# Reading the file:
# dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
dir<- "C:/Users/Shahar/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
df <- read_excel(dir, sheet = 1)
df <- df %>% mutate(DOB = as.Date(DOB))
# Arranging df:
# Filtering only participants that completed the survey:
df <- df %>% filter(is.na(lost_of_followup))
# Filtering only participants that completed the second year:
df <- df %>% filter(month_survey_complete == 2)
# Removing non relevant columns: from type_of_allergy to 12_month_FA_type_allergy
#remove_columns = colnames(df)[51:88]
df <- df[,-c(51:88)]
# Removing columns with allot on NA:
not_relevant <- c('allergist_followup', 'last_spt', 'epipen', 'mistake_exposure', 'reaction_type24', 'diagnosis_by', 'lost_of_followup')
df <- df[-which(colnames(df) %in% not_relevant)]
# Adding binary columns
# A. Did any one from family (mother, father, sib) have *any* of the disease?
df$family_Atopic_diseases_sum <- rowSums(df[,14:49])
# B. Did somebody from family have a specific disease?
# NEED TO FILL IN
# C. Did a disease appear in a specific family member?
df$mother_Atopic_diseases_sum <- rowSums(df[,14:19])
df$father_Atopic_diseases_sum <- rowSums(df[,20:25])
df$sibling_Atopic_diseases_sum <- rowSums(df[,26:49])
df <- df %>% mutate(family_Atopic_diseases = ifelse(family_Atopic_diseases_sum >0,1,0),
mother_Atopic_diseases = ifelse(mother_Atopic_diseases_sum>0,1,0),
father_Atopic_diseases = ifelse(father_Atopic_diseases_sum > 0, 1,0),
sibling_Atopic_diseases = ifelse(sibling_Atopic_diseases_sum > 0 ,1, 0))
# Changing to binary variables:
df$gender[df$gender == 2] <- 0
df$`Jew/Arab`[df$`Jew/Arab` == 2] <- 0
df$food_allergy_24_month[df$food_allergy_24_month == 2] <- 0
df$inhalation_24_month[df$inhalation_24_month == 2] <- 0
df$prevention_therapy[df$prevention_therapy == 2] <- 0
df$AD_24_month[df$AD_24_month == 2] <- 0
df$steroids_treatment24[df$steroids_treatment24 == 2] <- 0
df$ABX_treatment_24_months[df$ABX_treatment_24_months == 2] <- 0
df$hospitalization_24_months[df$hospitalization_24_months == 2] <- 0
df$chronic_disease_24[df$chronic_disease_24 == 2] <- 0
#Changing NA to 0 for
df$number_ABX_treatment_24_months<- replace(df$number_ABX_treatment_24_months, is.na(df$number_ABX_treatment_24_months), 0)
df$hospitalization_24_months<- replace(df$hospitalization_24_months, is.na(df$hospitalization_24_months), 0)
df$prevention_therapy<- replace(df$prevention_therapy, is.na(df$prevention_therapy), 0)
df$number_inhalation<- replace(df$number_inhalation, is.na(df$number_inhalation), 0)
df$AD_treatment_24_month<- replace(df$AD_treatment_24_month, is.na(df$AD_treatment_24_month), 0)
df$steroids_treatment24<- replace(df$steroids_treatment24, is.na(df$steroids_treatment24), 0)
df$number_steroid_treat<- replace(df$number_steroid_treat
, is.na(df$number_steroid_treat), 0)
df$number_of_ABX_first_year<- replace(df$number_of_ABX_first_year, is.na(df$number_of_ABX_first_year), 0)
#Creating dependent variables:
#option A of explanatory var:
df <- df %>% mutate(is_atopic_first_year = ifelse((AD_first_year + FA_first_year + ABX_fisrt_year)>0,1,0), is_atopic_second_year = ifelse((food_allergy_24_month + inhalation_24_month + AD_24_month)>0,1,0))
#option B of explanatory var:
#From mail
#Choosing explanatory variables: Ones that have a sufficient number of observation before and after Corona
#The distribution of observations according to the timeline of the corona. Before the corona = 1, the first six months of the corona = 2  and after = 3:
covid_start_date <- as.Date("2020-01-30")
covid_mid_date <- as.Date("2020-07-30")
df <- df %>% mutate(covid_time = ifelse(DOB < covid_start_date,1,ifelse(DOB < covid_mid_date, 2,3)))
df[,c("DOB","covid_time")]
table(df$covid_time)
df
colnames(df)
df$study_group_COMEET
colnames(df)
table(chronic_rhinitis_24_month)
table(df$chronic_rhinitis_24_month)
colnames(df)
# Reading the file:
# dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
dir<-"C:/Users/Shahar/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
# Reading the file:
# dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
dir<-"C:/Users/Shahar/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
df <- read_excel(dir, sheet = 1)
# libraries:
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
options(scipen=5, digits = 5)
# Reading the file:
# dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
dir<-"C:/Users/Shahar/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
df <- read_excel(dir, sheet = 1)
df <- df %>% mutate(DOB = as.Date(DOB))
# Arranging df:
# Filtering only participants that completed the survey:
df <- df %>% filter(is.na(lost_of_followup))
# Filtering only participants that completed the second year:
df <- df %>% filter(month_survey_complete == 2)
# Removing non relevant columns: from type_of_allergy to 12_month_FA_type_allergy
#remove_columns = colnames(df)[51:88]
df <- df[,-c(51:88)]
# Removing columns with allot on NA:
not_relevant <- c('allergist_followup', 'last_spt', 'epipen', 'mistake_exposure', 'reaction_type24', 'diagnosis_by', 'lost_of_followup')
df <- df[-which(colnames(df) %in% not_relevant)]
# Adding binary columns
# A. Did any one from family (mother, father, sib) have *any* of the disease?
df$family_Atopic_diseases_sum <- rowSums(df[,14:49])
# B. Did somebody from family have a specific disease?
# NEED TO FILL IN
# C. Did a disease appear in a specific family member?
df$mother_Atopic_diseases_sum <- rowSums(df[,14:19])
df$father_Atopic_diseases_sum <- rowSums(df[,20:25])
df$sibling_Atopic_diseases_sum <- rowSums(df[,26:49])
df <- df %>% mutate(family_Atopic_diseases = ifelse(family_Atopic_diseases_sum >0,1,0),
mother_Atopic_diseases = ifelse(mother_Atopic_diseases_sum>0,1,0),
father_Atopic_diseases = ifelse(father_Atopic_diseases_sum > 0, 1,0),
sibling_Atopic_diseases = ifelse(sibling_Atopic_diseases_sum > 0 ,1, 0))
# Changing to binary variables:
df$gender[df$gender == 2] <- 0
df$`Jew/Arab`[df$`Jew/Arab` == 2] <- 0
df$food_allergy_24_month[df$food_allergy_24_month == 2] <- 0
df$inhalation_24_month[df$inhalation_24_month == 2] <- 0
df$prevention_therapy[df$prevention_therapy == 2] <- 0
df$AD_24_month[df$AD_24_month == 2] <- 0
df$steroids_treatment24[df$steroids_treatment24 == 2] <- 0
df$ABX_treatment_24_months[df$ABX_treatment_24_months == 2] <- 0
df$hospitalization_24_months[df$hospitalization_24_months == 2] <- 0
df$chronic_disease_24[df$chronic_disease_24 == 2] <- 0
#Changing NA to 0 for
df$number_ABX_treatment_24_months<- replace(df$number_ABX_treatment_24_months, is.na(df$number_ABX_treatment_24_months), 0)
df$hospitalization_24_months<- replace(df$hospitalization_24_months, is.na(df$hospitalization_24_months), 0)
df$prevention_therapy<- replace(df$prevention_therapy, is.na(df$prevention_therapy), 0)
df$number_inhalation<- replace(df$number_inhalation, is.na(df$number_inhalation), 0)
df$AD_treatment_24_month<- replace(df$AD_treatment_24_month, is.na(df$AD_treatment_24_month), 0)
df$steroids_treatment24<- replace(df$steroids_treatment24, is.na(df$steroids_treatment24), 0)
df$number_steroid_treat<- replace(df$number_steroid_treat
, is.na(df$number_steroid_treat), 0)
df$number_of_ABX_first_year<- replace(df$number_of_ABX_first_year, is.na(df$number_of_ABX_first_year), 0)
#Creating dependent variables:
#option A of explanatory var:
df <- df %>% mutate(is_atopic_first_year = ifelse((AD_first_year + FA_first_year + ABX_fisrt_year)>0,1,0), is_atopic_second_year = ifelse((food_allergy_24_month + inhalation_24_month + AD_24_month)>0,1,0))
#option B of explanatory var:
#From mail
#Choosing explanatory variables: Ones that have a sufficient number of observation before and after Corona
#The distribution of observations according to the timeline of the corona. Before the corona = 1, the first six months of the corona = 2  and after = 3:
covid_start_date <- as.Date("2020-01-30")
covid_mid_date <- as.Date("2020-07-30")
df <- df %>% mutate(covid_time = ifelse(DOB < covid_start_date,1,ifelse(DOB < covid_mid_date, 2,3)))
df[,c("DOB","covid_time")]
table(df$covid_time)
df[,c("DOB","covid_time")]
table(df$covid_time)
unique(df$DOB)
min(df$DOB)
df <- df %>% mutate(covid_time = ifelse(DOB < group1,1,ifelse(DOB < group2, 2,ifelse(DOB<group3, 3, 4))))
#Choosing explanatory variables: Ones that have a sufficient number of observation before and after Corona
#The distribution of observations according to the timeline of the corona. Before the corona = 1, the first six months of the corona = 2  and after = 3:
min(df$DOB)
group1 <- as.Date("2019-03-01")
group2 <- as.Date("2020-03-11")
group3 <- as.Date("2021-02-07")
df <- df %>% mutate(covid_time = ifelse(DOB < group1,1,ifelse(DOB < group2, 2,ifelse(DOB<group3, 3, 4))))
# df[,c("DOB","covid_time")]
table(df$covid_time)
df <- df %>% mutate(covid_time = ifelse(DOB < group1, 1, ifelse(DOB < group2, 2, ifelse(DOB<group3, 3, 4))))
df
unique(df$DOB)
max(df$DOB)
# Reading the file:
# dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_3.1.23_raw.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_3.1.23_raw.xlsx"
dir<-"C:/Users/Shahar/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_3.1.23_raw.xlsx"
df <- read_excel(dir, sheet = 1)
# Reading the file:
# dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_3.1.23.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_3.1.23.xlsx"
dir<-"C:/Users/Shahar/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_3.1.23.xlsx"
# Reading the file:
# dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_3.1.23.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_3.1.23.xlsx"
dir<-"C:/Users/Shahar/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_3.1.23.xlsx"
df <- read_excel(dir, sheet = 1)
df <- df %>% mutate(DOB = as.Date(DOB))
# Arranging df:
# Filtering only participants that completed the survey:
df <- df %>% filter(is.na(lost_of_followup))
# Filtering only participants that completed the second year:
df <- df %>% filter(month_survey_complete == 2)
# Removing non relevant columns: from type_of_allergy to 12_month_FA_type_allergy
#remove_columns = colnames(df)[51:88]
df <- df[,-c(51:88)]
# Removing columns with allot on NA:
not_relevant <- c('allergist_followup', 'last_spt', 'epipen', 'mistake_exposure', 'reaction_type24', 'diagnosis_by', 'lost_of_followup')
df <- df[-which(colnames(df) %in% not_relevant)]
# Adding binary columns
# A. Did any one from family (mother, father, sib) have *any* of the disease?
df$family_Atopic_diseases_sum <- rowSums(df[,14:49])
# B. Did somebody from family have a specific disease?
# NEED TO FILL IN
# C. Did a disease appear in a specific family member?
df$mother_Atopic_diseases_sum <- rowSums(df[,14:19])
df$father_Atopic_diseases_sum <- rowSums(df[,20:25])
df$sibling_Atopic_diseases_sum <- rowSums(df[,26:49])
df <- df %>% mutate(family_Atopic_diseases = ifelse(family_Atopic_diseases_sum >0,1,0),
mother_Atopic_diseases = ifelse(mother_Atopic_diseases_sum>0,1,0),
father_Atopic_diseases = ifelse(father_Atopic_diseases_sum > 0, 1,0),
sibling_Atopic_diseases = ifelse(sibling_Atopic_diseases_sum > 0 ,1, 0))
# Changing to binary variables:
df$gender[df$gender == 2] <- 0
df$`Jew/Arab`[df$`Jew/Arab` == 2] <- 0
df$food_allergy_24_month[df$food_allergy_24_month == 2] <- 0
df$inhalation_24_month[df$inhalation_24_month == 2] <- 0
df$prevention_therapy[df$prevention_therapy == 2] <- 0
df$AD_24_month[df$AD_24_month == 2] <- 0
df$steroids_treatment24[df$steroids_treatment24 == 2] <- 0
df$ABX_treatment_24_months[df$ABX_treatment_24_months == 2] <- 0
df$hospitalization_24_months[df$hospitalization_24_months == 2] <- 0
df$chronic_disease_24[df$chronic_disease_24 == 2] <- 0
#Changing NA to 0 for
df$number_ABX_treatment_24_months<- replace(df$number_ABX_treatment_24_months, is.na(df$number_ABX_treatment_24_months), 0)
df$hospitalization_24_months<- replace(df$hospitalization_24_months, is.na(df$hospitalization_24_months), 0)
df$prevention_therapy<- replace(df$prevention_therapy, is.na(df$prevention_therapy), 0)
df$number_inhalation<- replace(df$number_inhalation, is.na(df$number_inhalation), 0)
df$AD_treatment_24_month<- replace(df$AD_treatment_24_month, is.na(df$AD_treatment_24_month), 0)
df$steroids_treatment24<- replace(df$steroids_treatment24, is.na(df$steroids_treatment24), 0)
df$number_steroid_treat<- replace(df$number_steroid_treat
, is.na(df$number_steroid_treat), 0)
df$number_of_ABX_first_year<- replace(df$number_of_ABX_first_year, is.na(df$number_of_ABX_first_year), 0)
#Creating dependent variables:
#option A of explanatory var:
df <- df %>% mutate(is_atopic_first_year = ifelse((AD_first_year + FA_first_year + ABX_fisrt_year)>0,1,0), is_atopic_second_year = ifelse((food_allergy_24_month + inhalation_24_month + AD_24_month)>0,1,0))
#option B of explanatory var:
#From mail
#Choosing explanatory variables: Ones that have a sufficient number of observation before and after Corona
#The distribution of observations according to the timeline of the corona. Before the corona = 1, the first six months of the corona = 2  and after = 3:
group1 <- as.Date("2019-03-01")
group2 <- as.Date("2020-03-11")
group3 <- as.Date("2021-02-07")
df <- df %>% mutate(covid_time = ifelse(DOB < group1, 1, ifelse(DOB < group2, 2, ifelse(DOB<group3, 3, 4))))
# df[,c("DOB","covid_time")]
table(df$covid_time)
max(df$DOB)
# Taking a first view at data:
summary(df)
glimpse(df)
# attach(df)
# One strange observation- gave birth at 12??
df[which(df$mother_year_birth> 2000),] # to take off ??
# Taking a first view at data:
summary(df)
glimpse(df)
# attach(df)
# One strange observation- gave birth at 12??
df[which(df$mother_year_birth> 2000),] # to take off ??
mean(df$AD_first_year)
df$AD_first_year
df[which(colnames(df) == 'DOB') == 4]
df[which(colnames(df) == 'DOB') == 1]
df[which(colnames(df) == 'DOB') == 1,]
df[,which(colnames(df) == 'DOB')]
df[,which(colnames(df) == 'covid_time')]
df[,which(colnames(df) == 'covid_time') ==1]
df[,which(colnames(df) == 'covid_time') == 1]
df[which(colnames(df) == 'covid_time') == 1,]
df[which(colnames(df) == 'covid_time')]
df[which(colnames(df) == 'covid_time')== 1]
df[,which(colnames(df) == 'covid_time') == 1]
df[which(df$covid_time == 1]
df[which(df$covid_time == 1)]
df[which(df$covid_time == 1),]
df[which(df$covid_time == 1),'AD_first_year']
mean(df[which(df$covid_time == 1),'AD_first_year'])
df[which(df$covid_time == 1),'AD_first_year']
mean(df[which(df$covid_time == 1),'AD_first_year'])
mean(df[which(df$covid_time == 1),'AD_first_year']$AD_first_year)
mean(df[which(df$covid_time == 1),]$AD_first_year)
mean(df[which(df$covid_time == 2),]$AD_first_year)
mean(df[which(df$covid_time == 3),]$AD_first_year)
mean(df[which(df$covid_time == 1),]$AD_first_year)
mean(df[which(df$covid_time == 2),]$AD_first_year)
mean(df[which(df$covid_time == 3),]$AD_first_year)
var(df[which(df$covid_time == 3),]$AD_first_year)
var(df[which(df$covid_time == 1),]$AD_first_year)
var(df[which(df$covid_time == 2),]$AD_first_year)
var(df[which(df$covid_time == 3),]$AD_first_year)
mean(df[which(df$covid_time == 1),]$FA_first_year)
mean(df[which(df$covid_time == 2),]$FA_first_year)
mean(df[which(df$covid_time == 3),]$FA_first_year)
mean(df[which(df$covid_time == 1),]$HRAD_first_year)
mean(df[which(df$covid_time == 2),]$HRAD_first_year)
mean(df[which(df$covid_time == 3),]$HRAD_first_year)
mean(df[which(df$covid_time == 1),]$is_atopic_second_year)
mean(df[which(df$covid_time == 2),]$is_atopic_second_year)
mean(df[which(df$covid_time == 3),]$is_atopic_second_year)
df[which(df$covid_time == 3),]$is_atopic_second_year
mean(df[which(df$covid_time == 1),]$is_atopic_second_year, na.rm = T)
mean(df[which(df$covid_time == 2),]$is_atopic_second_year, na.rm = T)
mean(df[which(df$covid_time == 3),]$is_atopic_second_year, na.rm = T)
