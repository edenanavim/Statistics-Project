# libraries:
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
options(scipen=5, digits = 5)
# libraries:
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
options(scipen=5, digits = 5)
# libraries:
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
options(scipen=5, digits = 5)
# Reading the file:
#dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
=======
dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
>>>>>>> Stashed changes
#dir<-
df <- read_excel(dir, sheet = 1)
df <- df %>% mutate(DOB = as.Date(DOB))
# Arranging df:
# Filtering only participants that completed the survey:
df <- df %>% filter(is.na(lost_of_followup))
# Filtering only participants that completed the second year:
df <- df %>% filter(month_survey_complete == 2)
# Removing non relevant columns: from type_of_allergy to 12_month_FA_type_allergy
<<<<<<< Updated upstream
#remove_columns = colnames(df)[51:88]
df <- df[,-c(51:88)]
=======
remove_columns = colnames(df)[51:88]
df <- df[,-c(51:86)]
>>>>>>> Stashed changes
# Removing columns with allot on NA:
not_relevant <- c('allergist_followup', 'last_spt', 'epipen', 'mistake_exposure', 'reaction_type24', 'diagnosis_by', 'lost_of_followup')
df <- df[-which(colnames(df) %in% not_relevant)]
# Adding binary columns
# A. Did any one from family (mother, father, sib) have *any* of the disease?
df$family_Atopic_diseases_sum <- rowSums(df[,14:49])
# B. Did somebody from family have a specific disease?
# NEED TO FILL IN
# C. Did a disease appear in a specific family member?
df$mother_Atopic_diseases_sum <- rowSums(df[,14:19])
df$father_Atopic_diseases_sum <- rowSums(df[,20:25])
df$sibling_Atopic_diseases_sum <- rowSums(df[,26:49])
df <- df %>% mutate(family_Atopic_diseases = ifelse(family_Atopic_diseases_sum >0,1,0),
mother_Atopic_diseases = ifelse(mother_Atopic_diseases_sum>0,1,0),
father_Atopic_diseases = ifelse(father_Atopic_diseases_sum > 0, 1,0),
sibling_Atopic_diseases = ifelse(sibling_Atopic_diseases_sum > 0 ,1, 0))
# Changing to binary variables:
df$gender[df$gender == 2] <- 0
df$`Jew/Arab`[df$`Jew/Arab` == 2] <- 0
df$food_allergy_24_month[df$food_allergy_24_month == 2] <- 0
df$inhalation_24_month[df$inhalation_24_month == 2] <- 0
df$prevention_therapy[df$prevention_therapy == 2] <- 0
df$AD_24_month[df$AD_24_month == 2] <- 0
df$steroids_treatment24[df$steroids_treatment24 == 2] <- 0
df$ABX_treatment_24_months[df$ABX_treatment_24_months == 2] <- 0
df$hospitalization_24_months[df$hospitalization_24_months == 2] <- 0
df$chronic_disease_24[df$chronic_disease_24 == 2] <- 0
<<<<<<< Updated upstream
# Taking a first view at data:
summary(df)
glimpse(df)
# attach(df)
# One strange observation- gave birth at 12??
df[which(df$mother_year_birth> 2000),] # to take off ??
attach(df) ##מה זה?
attach(df) ##מה זה? -- יוצר משתנה עבור כל עמודה בפנה עצמה סלי קשר לדאטה
# Show the distribution of some variables
hist(mother_year_birth)
hist(SES) #socio-economic status
tablelist
=======
>>>>>>> Stashed changes
# Frequency table for each column
tablelist <- mapply(table, df)
tablelist
# How many NA are in each column
NA_count <- as.data.frame(t(df %>% summarise_all(funs(sum(is.na(.)))))) %>% dplyr::rename("amount of NA" = 1)
NA_count <- NA_count %>% mutate(Name = rownames(NA_count))
NA_column = NA_count %>% filter(`amount of NA` >0) %>% arrange(`amount of NA`)
<<<<<<< Updated upstream
# How many NA are in each column
NA_count <- as.data.frame(t(df %>% summarise_all(funs(sum(is.na(.)))))) %>% dplyr::rename("amount of NA" = 1)
NA_count <- NA_count %>% mutate(Name = rownames(NA_count))
NA_column = NA_count %>% filter(`amount of NA` >0) %>% arrange(`amount of NA`)
View(NA_column)
df$month_F
View(df)
df$AD_first_year
# Reading the file:
#dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
=======
View(NA_count)
# Frequency table for each column
#tablelist <- mapply(table, df)
#tablelist
# Reading the file:
dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
>>>>>>> Stashed changes
#dir<-
df <- read_excel(dir, sheet = 1)
df <- df %>% mutate(DOB = as.Date(DOB))
# Arranging df:
# Filtering only participants that completed the survey:
df <- df %>% filter(is.na(lost_of_followup))
# Filtering only participants that completed the second year:
df <- df %>% filter(month_survey_complete == 2)
# Removing non relevant columns: from type_of_allergy to 12_month_FA_type_allergy
#remove_columns = colnames(df)[51:88]
df <- df[,-c(51:88)]
# Removing columns with allot on NA:
not_relevant <- c('allergist_followup', 'last_spt', 'epipen', 'mistake_exposure', 'reaction_type24', 'diagnosis_by', 'lost_of_followup')
df <- df[-which(colnames(df) %in% not_relevant)]
# Adding binary columns
# A. Did any one from family (mother, father, sib) have *any* of the disease?
df$family_Atopic_diseases_sum <- rowSums(df[,14:49])
# B. Did somebody from family have a specific disease?
# NEED TO FILL IN
# C. Did a disease appear in a specific family member?
df$mother_Atopic_diseases_sum <- rowSums(df[,14:19])
df$father_Atopic_diseases_sum <- rowSums(df[,20:25])
df$sibling_Atopic_diseases_sum <- rowSums(df[,26:49])
df <- df %>% mutate(family_Atopic_diseases = ifelse(family_Atopic_diseases_sum >0,1,0),
mother_Atopic_diseases = ifelse(mother_Atopic_diseases_sum>0,1,0),
father_Atopic_diseases = ifelse(father_Atopic_diseases_sum > 0, 1,0),
sibling_Atopic_diseases = ifelse(sibling_Atopic_diseases_sum > 0 ,1, 0))
# Changing to binary variables:
df$gender[df$gender == 2] <- 0
df$`Jew/Arab`[df$`Jew/Arab` == 2] <- 0
df$food_allergy_24_month[df$food_allergy_24_month == 2] <- 0
df$inhalation_24_month[df$inhalation_24_month == 2] <- 0
df$prevention_therapy[df$prevention_therapy == 2] <- 0
df$AD_24_month[df$AD_24_month == 2] <- 0
df$steroids_treatment24[df$steroids_treatment24 == 2] <- 0
df$ABX_treatment_24_months[df$ABX_treatment_24_months == 2] <- 0
df$hospitalization_24_months[df$hospitalization_24_months == 2] <- 0
df$chronic_disease_24[df$chronic_disease_24 == 2] <- 0
<<<<<<< Updated upstream
df$AD_first_year
df <- df %>% mutate(is_atopic_first_year = ifelse((AD_first_year + FA_first_year + ABX_fisrt_year)>0,1,0))
as.Date("2020-01-30")
View(df)
covid_start_date <- as.Date("2020-01-30")
covid_mid_date <- as.Date("2020-07-30")
df <- df %>% mutate(covid_time = ifelse(DOB < covid_start_date,1,ifelse(DOB < covid_mid_date, 2,3)))
df[,c("DOB","covid_time")]
table(df$covid_time)
df[which(DOB == MAX(dob)),]
df[which(DOB == max(DOB)),]
table(df$covid_time)
source('~/.active-rstudio-document', encoding = 'UTF-8', echo=TRUE)
923 +344 +115
table(df$covid_time,df$`mode of delivery`)
819 + 43 + 61
table(df$covid_time,df$`mode of delivery`,df$mother_asthma)
table(df$covid_time,df$`mode of delivery`)
#df$month_F
colnames(df)
#df$month_F
colnames(df)[49:93]
#df$month_F
colnames(df)[49:83]
print("SES")
table(df$covid_time,df$SES)
print("gender")
table(df$covid_time,df$gender)
print("mother_education")
table(df$covid_time,df$mother_education)
print("preganancy_number")
table(df$covid_time,df$preganancy_number)
print("type_of_pregnancy")
table(df$covid_time,df$type_of_pregnancy)
print("mode of delivery")
table(df$covid_time,df$`mode of delivery`)
print("mother_Atopic_diseases")
table(df$covid_time,df$mother_Atopic_diseases)
print("father_Atopic_diseases")
table(df$covid_time,df$father_Atopic_diseases)
print("sibling_Atopic_diseases")
table(df$covid_time,df$sibling_Atopic_diseases)
print("vaccine_12mo")
table(df$covid_time,df$vaccine_12mo)
print("nursing_setup_at_12mo")
table(df$covid_time,df$nursing_setup_at_12mo)
print("daycare_24month")
table(df$covid_time,df$daycare_24month)
print("vaccines_24month")
table(df$covid_time,df$vaccines_24month)
print("HRAD_first_year")
table(df$covid_time,df$HRAD_first_year)
print("AD_first_year")
table(df$covid_time,df$AD_first_year)
print("FA_first_year")
table(df$covid_time,df$FA_first_year)
print("ABX_fisrt_year")
table(df$covid_time,df$ABX_fisrt_year)
print("is_atopic_first_year")
table(df$covid_time,df$is_atopic_first_year)
print("food_allergy_24_month")
table(df$covid_time,df$food_allergy_24_month)
print("inhalation_24_month")
table(df$covid_time,df$inhalation_24_month)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("hospitalization_24_months")
table(df$covid_time,df$hospitalization_24_months)
print("chronic_disease_24")
table(df$covid_time,df$chronic_disease_24)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print('is_atopic_second_year)
table(df$covid_time,df$is_atopic_second_year)
print("SES")
table(df$covid_time,df$SES)
print("gender")
table(df$covid_time,df$gender)
print("mother_education")
table(df$covid_time,df$mother_education)
print("preganancy_number")
table(df$covid_time,df$preganancy_number)
print("type_of_pregnancy")
table(df$covid_time,df$type_of_pregnancy)
print("mode of delivery")
table(df$covid_time,df$`mode of delivery`)
print("mother_Atopic_diseases")
table(df$covid_time,df$mother_Atopic_diseases)
print("father_Atopic_diseases")
table(df$covid_time,df$father_Atopic_diseases)
print("sibling_Atopic_diseases")
table(df$covid_time,df$sibling_Atopic_diseases)
print("vaccine_12mo")
table(df$covid_time,df$vaccine_12mo)
print("nursing_setup_at_12mo")
table(df$covid_time,df$nursing_setup_at_12mo)
print("daycare_24month")
table(df$covid_time,df$daycare_24month)
print("vaccines_24month")
table(df$covid_time,df$vaccines_24month)
print("HRAD_first_year")
table(df$covid_time,df$HRAD_first_year)
print("AD_first_year")
table(df$covid_time,df$AD_first_year)
print("FA_first_year")
table(df$covid_time,df$FA_first_year)
print("ABX_fisrt_year")
table(df$covid_time,df$ABX_fisrt_year)
print("is_atopic_first_year")
table(df$covid_time,df$is_atopic_first_year)
print("food_allergy_24_month")
table(df$covid_time,df$food_allergy_24_month)
print("inhalation_24_month")
table(df$covid_time,df$inhalation_24_month)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("hospitalization_24_months")
table(df$covid_time,df$hospitalization_24_months)
print("chronic_disease_24")
table(df$covid_time,df$chronic_disease_24)
print("AD_24_month")
table(df$covid_time,df$AD_24_month)
print("chronic_rhinitis_24_month")
table(df$covid_time,df$chronic_rhinitis_24_month)
print("is_atopic_second_year")
table(df$covid_time,df$is_atopic_second_year)
=======
# How many NA are in each column
NA_count <- as.data.frame(t(df %>% summarise_all(funs(sum(is.na(.)))))) %>% dplyr::rename("amount of NA" = 1)
NA_count <- NA_count %>% mutate(Name = rownames(NA_count))
NA_column = NA_count %>% filter(`amount of NA` >0) %>% arrange(`amount of NA`)
>>>>>>> Stashed changes
# libraries:
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
options(scipen=5, digits = 5)
# Reading the file:
dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir<-
df <- read_excel(dir, sheet = 1)
df <- df %>% mutate(DOB = as.Date(DOB))
# Arranging df:
# Filtering only participants that completed the survey:
df <- df %>% filter(is.na(lost_of_followup))
# Filtering only participants that completed the second year:
df <- df %>% filter(month_survey_complete == 2)
# Removing non relevant columns: from type_of_allergy to 12_month_FA_type_allergy
#remove_columns = colnames(df)[51:88]
df <- df[,-c(51:88)]
# Removing columns with allot on NA:
not_relevant <- c('allergist_followup', 'last_spt', 'epipen', 'mistake_exposure', 'reaction_type24', 'diagnosis_by', 'lost_of_followup')
df <- df[-which(colnames(df) %in% not_relevant)]
# Adding binary columns
# A. Did any one from family (mother, father, sib) have *any* of the disease?
df$family_Atopic_diseases_sum <- rowSums(df[,14:49])
# B. Did somebody from family have a specific disease?
# NEED TO FILL IN
# C. Did a disease appear in a specific family member?
df$mother_Atopic_diseases_sum <- rowSums(df[,14:19])
df$father_Atopic_diseases_sum <- rowSums(df[,20:25])
df$sibling_Atopic_diseases_sum <- rowSums(df[,26:49])
df <- df %>% mutate(family_Atopic_diseases = ifelse(family_Atopic_diseases_sum >0,1,0),
mother_Atopic_diseases = ifelse(mother_Atopic_diseases_sum>0,1,0),
father_Atopic_diseases = ifelse(father_Atopic_diseases_sum > 0, 1,0),
sibling_Atopic_diseases = ifelse(sibling_Atopic_diseases_sum > 0 ,1, 0))
# Changing to binary variables:
df$gender[df$gender == 2] <- 0
df$`Jew/Arab`[df$`Jew/Arab` == 2] <- 0
df$food_allergy_24_month[df$food_allergy_24_month == 2] <- 0
df$inhalation_24_month[df$inhalation_24_month == 2] <- 0
df$prevention_therapy[df$prevention_therapy == 2] <- 0
df$AD_24_month[df$AD_24_month == 2] <- 0
df$steroids_treatment24[df$steroids_treatment24 == 2] <- 0
df$ABX_treatment_24_months[df$ABX_treatment_24_months == 2] <- 0
df$hospitalization_24_months[df$hospitalization_24_months == 2] <- 0
df$chronic_disease_24[df$chronic_disease_24 == 2] <- 0
df <- df %>% mutate(is_atopic_first_year = ifelse((AD_first_year + FA_first_year + ABX_fisrt_year)>0,1,0), is_atopic_second_year = ifelse((food_allergy_24_month + inhalation_24_month + AD_24_month)>0,1,0))
# libraries:
library(readxl)
library(dplyr)
library(ggplot2)
library(tidyr)
options(scipen=5, digits = 5)
# Reading the file:
dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir<-
df <- read_excel(dir, sheet = 1)
df <- df %>% mutate(DOB = as.Date(DOB))
# Arranging df:
# Filtering only participants that completed the survey:
df <- df %>% filter(is.na(lost_of_followup))
# Filtering only participants that completed the second year:
df <- df %>% filter(month_survey_complete == 2)
# Removing non relevant columns: from type_of_allergy to 12_month_FA_type_allergy
#remove_columns = colnames(df)[51:88]
df <- df[,-c(51:88)]
# Removing columns with allot on NA:
not_relevant <- c('allergist_followup', 'last_spt', 'epipen', 'mistake_exposure', 'reaction_type24', 'diagnosis_by', 'lost_of_followup')
df <- df[-which(colnames(df) %in% not_relevant)]
# Adding binary columns
# A. Did any one from family (mother, father, sib) have *any* of the disease?
df$family_Atopic_diseases_sum <- rowSums(df[,14:49])
# B. Did somebody from family have a specific disease?
# NEED TO FILL IN
# C. Did a disease appear in a specific family member?
df$mother_Atopic_diseases_sum <- rowSums(df[,14:19])
df$father_Atopic_diseases_sum <- rowSums(df[,20:25])
df$sibling_Atopic_diseases_sum <- rowSums(df[,26:49])
df <- df %>% mutate(family_Atopic_diseases = ifelse(family_Atopic_diseases_sum >0,1,0),
mother_Atopic_diseases = ifelse(mother_Atopic_diseases_sum>0,1,0),
father_Atopic_diseases = ifelse(father_Atopic_diseases_sum > 0, 1,0),
sibling_Atopic_diseases = ifelse(sibling_Atopic_diseases_sum > 0 ,1, 0))
# Changing to binary variables:
df$gender[df$gender == 2] <- 0
df$`Jew/Arab`[df$`Jew/Arab` == 2] <- 0
df$food_allergy_24_month[df$food_allergy_24_month == 2] <- 0
df$inhalation_24_month[df$inhalation_24_month == 2] <- 0
df$prevention_therapy[df$prevention_therapy == 2] <- 0
df$AD_24_month[df$AD_24_month == 2] <- 0
df$steroids_treatment24[df$steroids_treatment24 == 2] <- 0
df$ABX_treatment_24_months[df$ABX_treatment_24_months == 2] <- 0
df$hospitalization_24_months[df$hospitalization_24_months == 2] <- 0
df$chronic_disease_24[df$chronic_disease_24 == 2] <- 0
#Creating explanatory variables:
df <- df %>% mutate(is_atopic_first_year = ifelse((AD_first_year + FA_first_year + ABX_fisrt_year)>0,1,0), is_atopic_second_year = ifelse((food_allergy_24_month + inhalation_24_month + AD_24_month)>0,1,0))
#The distribution of observations according to the timeline of the corona. Before the corona = 1, the first six months of the corona = 2  and after = 3:
covid_start_date <- as.Date("2020-01-30")
covid_mid_date <- as.Date("2020-07-30")
df <- df %>% mutate(covid_time = ifelse(DOB < covid_start_date,1,ifelse(DOB < covid_mid_date, 2,3)))
df[,c("DOB","covid_time")]
table(df$covid_time)
df$ABX_treatment_24_months
df$number_ABX_treatment_24_months
df[is.na(df$ABX_treatment_24_months)] <- 0
is.na(df$ABX_treatment_24_months) <- 0
df$number_ABX_treatment_24_months<- replace(df$number_ABX_treatment_24_months, is.na(df$number_ABX_treatment_24_months), 0)
df$number_ABX_treatment_24_months
df$hospitalization_24_months<- replace(df$hospitalization_24_months, is.na(df$hospitalization_24_months), 0)
df$hospitalization_24_months
# Reading the file:
dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir<-
df <- read_excel(dir, sheet = 1)
df <- df %>% mutate(DOB = as.Date(DOB))
# Arranging df:
# Filtering only participants that completed the survey:
df <- df %>% filter(is.na(lost_of_followup))
# Filtering only participants that completed the second year:
df <- df %>% filter(month_survey_complete == 2)
# Removing non relevant columns: from type_of_allergy to 12_month_FA_type_allergy
#remove_columns = colnames(df)[51:88]
df <- df[,-c(51:88)]
# Removing columns with allot on NA:
not_relevant <- c('allergist_followup', 'last_spt', 'epipen', 'mistake_exposure', 'reaction_type24', 'diagnosis_by', 'lost_of_followup')
df <- df[-which(colnames(df) %in% not_relevant)]
# Adding binary columns
# A. Did any one from family (mother, father, sib) have *any* of the disease?
df$family_Atopic_diseases_sum <- rowSums(df[,14:49])
# B. Did somebody from family have a specific disease?
# NEED TO FILL IN
# C. Did a disease appear in a specific family member?
df$mother_Atopic_diseases_sum <- rowSums(df[,14:19])
df$father_Atopic_diseases_sum <- rowSums(df[,20:25])
df$sibling_Atopic_diseases_sum <- rowSums(df[,26:49])
df <- df %>% mutate(family_Atopic_diseases = ifelse(family_Atopic_diseases_sum >0,1,0),
mother_Atopic_diseases = ifelse(mother_Atopic_diseases_sum>0,1,0),
father_Atopic_diseases = ifelse(father_Atopic_diseases_sum > 0, 1,0),
sibling_Atopic_diseases = ifelse(sibling_Atopic_diseases_sum > 0 ,1, 0))
# Changing to binary variables:
df$gender[df$gender == 2] <- 0
df$`Jew/Arab`[df$`Jew/Arab` == 2] <- 0
df$food_allergy_24_month[df$food_allergy_24_month == 2] <- 0
df$inhalation_24_month[df$inhalation_24_month == 2] <- 0
df$prevention_therapy[df$prevention_therapy == 2] <- 0
df$AD_24_month[df$AD_24_month == 2] <- 0
df$steroids_treatment24[df$steroids_treatment24 == 2] <- 0
df$ABX_treatment_24_months[df$ABX_treatment_24_months == 2] <- 0
df$hospitalization_24_months[df$hospitalization_24_months == 2] <- 0
df$chronic_disease_24[df$chronic_disease_24 == 2] <- 0
#Changing NA to 0 for
df$number_ABX_treatment_24_months<- replace(df$number_ABX_treatment_24_months, is.na(df$number_ABX_treatment_24_months), 0)
df$hospitalization_24_months<- replace(df$hospitalization_24_months, is.na(df$hospitalization_24_months), 0)
df$prevention_therapy<- replace(df$prevention_therapy, is.na(df$prevention_therapy), 0)
df$number_inhalation<- replace(df$number_inhalation, is.na(df$number_inhalation), 0)
df$AD_treatment_24_month<- replace(df$AD_treatment_24_month, is.na(df$AD_treatment_24_month), 0)
df$steroids_treatment24<- replace(df$steroids_treatment24, is.na(df$steroids_treatment24), 0)
df$number_steroid_treat<- replace(df$number_steroid_treat
, is.na(df$number_steroid_treat), 0)
df$ABX_treatment_24_months
# How many NA are in each column
NA_count <- as.data.frame(t(df %>% summarise_all(funs(sum(is.na(.)))))) %>% dplyr::rename("amount of NA" = 1)
NA_count <- NA_count %>% mutate(Name = rownames(NA_count))
NA_column = NA_count %>% filter(`amount of NA` >0) %>% arrange(`amount of NA`)
View(NA_column)
# Reading the file:
dir <- "C:/Users/Merav/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir <- "C:/Users/edena/Documents/GitHub/Statistics-Project/atopic_comorbidities_first_second_year_1.11.22_raw.xlsx"
#dir<-
df <- read_excel(dir, sheet = 1)
df <- df %>% mutate(DOB = as.Date(DOB))
# Arranging df:
# Filtering only participants that completed the survey:
df <- df %>% filter(is.na(lost_of_followup))
# Filtering only participants that completed the second year:
df <- df %>% filter(month_survey_complete == 2)
# Removing non relevant columns: from type_of_allergy to 12_month_FA_type_allergy
#remove_columns = colnames(df)[51:88]
df <- df[,-c(51:88)]
# Removing columns with allot on NA:
not_relevant <- c('allergist_followup', 'last_spt', 'epipen', 'mistake_exposure', 'reaction_type24', 'diagnosis_by', 'lost_of_followup')
df <- df[-which(colnames(df) %in% not_relevant)]
# Adding binary columns
# A. Did any one from family (mother, father, sib) have *any* of the disease?
df$family_Atopic_diseases_sum <- rowSums(df[,14:49])
# B. Did somebody from family have a specific disease?
# NEED TO FILL IN
# C. Did a disease appear in a specific family member?
df$mother_Atopic_diseases_sum <- rowSums(df[,14:19])
df$father_Atopic_diseases_sum <- rowSums(df[,20:25])
df$sibling_Atopic_diseases_sum <- rowSums(df[,26:49])
df <- df %>% mutate(family_Atopic_diseases = ifelse(family_Atopic_diseases_sum >0,1,0),
mother_Atopic_diseases = ifelse(mother_Atopic_diseases_sum>0,1,0),
father_Atopic_diseases = ifelse(father_Atopic_diseases_sum > 0, 1,0),
sibling_Atopic_diseases = ifelse(sibling_Atopic_diseases_sum > 0 ,1, 0))
# Changing to binary variables:
df$gender[df$gender == 2] <- 0
df$`Jew/Arab`[df$`Jew/Arab` == 2] <- 0
df$food_allergy_24_month[df$food_allergy_24_month == 2] <- 0
df$inhalation_24_month[df$inhalation_24_month == 2] <- 0
df$prevention_therapy[df$prevention_therapy == 2] <- 0
df$AD_24_month[df$AD_24_month == 2] <- 0
df$steroids_treatment24[df$steroids_treatment24 == 2] <- 0
df$ABX_treatment_24_months[df$ABX_treatment_24_months == 2] <- 0
df$hospitalization_24_months[df$hospitalization_24_months == 2] <- 0
df$chronic_disease_24[df$chronic_disease_24 == 2] <- 0
#Changing NA to 0 for
df$number_ABX_treatment_24_months<- replace(df$number_ABX_treatment_24_months, is.na(df$number_ABX_treatment_24_months), 0)
df$hospitalization_24_months<- replace(df$hospitalization_24_months, is.na(df$hospitalization_24_months), 0)
df$prevention_therapy<- replace(df$prevention_therapy, is.na(df$prevention_therapy), 0)
df$number_inhalation<- replace(df$number_inhalation, is.na(df$number_inhalation), 0)
df$AD_treatment_24_month<- replace(df$AD_treatment_24_month, is.na(df$AD_treatment_24_month), 0)
df$steroids_treatment24<- replace(df$steroids_treatment24, is.na(df$steroids_treatment24), 0)
df$number_steroid_treat<- replace(df$number_steroid_treat
, is.na(df$number_steroid_treat), 0)
df$number_of_ABX_first_year<- replace(df$number_of_ABX_first_year, is.na(df$number_of_ABX_first_year), 0)
# How many NA are in each column
NA_count <- as.data.frame(t(df %>% summarise_all(funs(sum(is.na(.)))))) %>% dplyr::rename("amount of NA" = 1)
NA_count <- NA_count %>% mutate(Name = rownames(NA_count))
NA_column = NA_count %>% filter(`amount of NA` >0) %>% arrange(`amount of NA`)
View(NA_column)
df$mother_education
